var n,e=(n=require("node-fetch"))&&"object"==typeof n&&"default"in n?n.default:n,t=n=>encodeURIComponent(n).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`);function r(n,e){return e.encode?e.strict?t(n):encodeURIComponent(n):n}function o(){var n=["a","e","i","o","u"],e=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"];return e[Math.floor(Math.random()*e.length)]+n[Math.floor(Math.random()*n.length)]}exports.login=function(n){return{social:function(e){return"https://"+n+".myshopify.com/apps/dimensionauth/"+e+"/1?native=1"},passwordless:function(t){try{var i=!1;function a(n){return i?n:{success:!1}}var s=t.email,c=o()+" &nbsp; "+o()+" &nbsp; "+Math.floor(10*Math.random()),u=function(){if(s&&s.length>5&&s.indexOf("@")>-1)return Promise.resolve(e("https://"+n+".myshopify.com/apps/dimensionauth/passwordless?"+((n,e)=>{if(!n)return"";const t=function(n){switch(n.arrayFormat){case"index":return e=>(t,o)=>{const i=t.length;return void 0===o?t:null===o?[...t,[r(e,n),"[",i,"]"].join("")]:[...t,[r(e,n),"[",r(i,n),"]=",r(o,n)].join("")]};case"bracket":return e=>(t,o)=>void 0===o?t:null===o?[...t,[r(e,n),"[]"].join("")]:[...t,[r(e,n),"[]=",r(o,n)].join("")];case"comma":return e=>(t,o,i)=>null==o||0===o.length?t:0===i?[[r(e,n),"=",r(o,n)].join("")]:[[t,r(o,n)].join(",")];default:return e=>(t,o)=>void 0===o?t:null===o?[...t,r(e,n)]:[...t,[r(e,n),"=",r(o,n)].join("")]}}(e=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},e)),o=Object.keys(n);return!1!==e.sort&&o.sort(e.sort),o.map(o=>{const i=n[o];return void 0===i?"":null===i?r(o,e):Array.isArray(i)?i.reduce(t(o),[]).join("&"):r(o,e)+"="+r(i,e)}).filter(n=>n.length>0).join("&")})({email:s,code:c,native:1}))).then(function(n){return i=!0,n.json()})}();return Promise.resolve(u&&u.then?u.then(a):a(u))}catch(n){return Promise.reject(n)}}}};
//# sourceMappingURL=api.ts.js.map
