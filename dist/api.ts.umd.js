!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("node-fetch")):"function"==typeof define&&define.amd?define(["exports","node-fetch"],e):e(n.shopifyPasswordlessLogin={},n.fetch)}(this,function(n,e){e=e&&e.hasOwnProperty("default")?e.default:e;var t=n=>encodeURIComponent(n).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`);function o(n,e){return e.encode?e.strict?t(n):encodeURIComponent(n):n}function r(){var n=["a","e","i","o","u"],e=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"];return e[Math.floor(Math.random()*e.length)]+n[Math.floor(Math.random()*n.length)]}n.login=function(n){return{social:function(e){return"https://"+n+".myshopify.com/apps/dimensionauth/"+e+"/1?native=1"},passwordless:function(t){try{return Promise.resolve(e("https://"+n+".myshopify.com/apps/dimensionauth/passwordless?"+((n,e)=>{if(!n)return"";const t=function(n){switch(n.arrayFormat){case"index":return e=>(t,r)=>{const i=t.length;return void 0===r?t:null===r?[...t,[o(e,n),"[",i,"]"].join("")]:[...t,[o(e,n),"[",o(i,n),"]=",o(r,n)].join("")]};case"bracket":return e=>(t,r)=>void 0===r?t:null===r?[...t,[o(e,n),"[]"].join("")]:[...t,[o(e,n),"[]=",o(r,n)].join("")];case"comma":return e=>(t,r,i)=>null==r||0===r.length?t:0===i?[[o(e,n),"=",o(r,n)].join("")]:[[t,o(r,n)].join(",")];default:return e=>(t,r)=>void 0===r?t:null===r?[...t,o(e,n)]:[...t,[o(e,n),"=",o(r,n)].join("")]}}(e=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},e)),r=Object.keys(n);return!1!==e.sort&&r.sort(e.sort),r.map(r=>{const i=n[r];return void 0===i?"":null===i?o(r,e):Array.isArray(i)?i.reduce(t(r),[]).join("&"):o(r,e)+"="+o(i,e)}).filter(n=>n.length>0).join("&")})({email:t.email,native:1,code:r()+" &nbsp; "+r()+" &nbsp; "+Math.floor(10*Math.random())}))).then(function(n){return n.json()})}catch(n){return Promise.reject(n)}}}}});
//# sourceMappingURL=api.ts.umd.js.map
