import n from"node-fetch";var e=n=>encodeURIComponent(n).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`);function r(n,r){return r.encode?r.strict?e(n):encodeURIComponent(n):n}var t=function(e){return{social:function(n){return"https://"+o(e)+"/apps/dimensionauth/"+n+"/1?native=1"},passwordless:function(t){try{var a=!1;function s(n){return a?n:{success:!1}}var c=t.email,u=i()+" "+i()+" "+Math.floor(10*Math.random()),l=function(){if(c&&c.length>5&&c.indexOf("@")>-1)return Promise.resolve(n("https://"+o(e)+"/apps/dimensionauth/passwordless?"+((n,e)=>{if(!n)return"";const t=function(n){switch(n.arrayFormat){case"index":return e=>(t,o)=>{const i=t.length;return void 0===o?t:null===o?[...t,[r(e,n),"[",i,"]"].join("")]:[...t,[r(e,n),"[",r(i,n),"]=",r(o,n)].join("")]};case"bracket":return e=>(t,o)=>void 0===o?t:null===o?[...t,[r(e,n),"[]"].join("")]:[...t,[r(e,n),"[]=",r(o,n)].join("")];case"comma":return e=>(t,o,i)=>null==o||0===o.length?t:0===i?[[r(e,n),"=",r(o,n)].join("")]:[[t,r(o,n)].join(",")];default:return e=>(t,o)=>void 0===o?t:null===o?[...t,r(e,n)]:[...t,[r(e,n),"=",r(o,n)].join("")]}}(e=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},e)),o=Object.keys(n);return!1!==e.sort&&o.sort(e.sort),o.map(o=>{const i=n[o];return void 0===i?"":null===i?r(o,e):Array.isArray(i)?i.reduce(t(o),[]).join("&"):r(o,e)+"="+r(i,e)}).filter(n=>n.length>0).join("&")})({email:c,code:u,native:1}))).then(function(n){return Promise.resolve(n.json()).then(function(n){return a=!0,n})})}();return Promise.resolve(l&&l.then?l.then(s):s(l))}catch(n){return Promise.reject(n)}}}};function o(n){return n.indexOf("myshopify.com")>=0?n:-1===n.indexOf(".")?n+".myshopify.com":n}function i(){var n=["a","e","i","o","u"],e=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"];return e[Math.floor(Math.random()*e.length)]+n[Math.floor(Math.random()*n.length)]}export{t as login};
//# sourceMappingURL=api.ts.module.ts.map
